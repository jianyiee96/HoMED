<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="template/template.xhtml">

    <ui:define name="title">Medical Centre Management Page</ui:define>
    <ui:define name="viewname">
        <li>Pages</li>
        <li>/</li>
        <li><p:link outcome="/login">Empty</p:link></li>
    </ui:define>

    <ui:define name="content">

        <style type="text/css">
            .error-message {
                margin: 0.5rem 0rem 0rem 0rem !important;
            }
        </style>

        <h:form id="formAllMedicalCentres">
            <div class="p-grid crud-table">
                <div class="p-col-12">
                    <div class="card">
                        <p:growl id="growl-message" for="growl-message" showDetail="true" />

                        <div class="buttonbar">
                            <p:commandButton value="New" icon="pi pi-plus" styleClass="success-button" style="margin-right: .5rem"
                                             actionListener="#{medicalCentreManagementManagedBean.create}" update="panelManageMedicalCentre" immediate="true" oncomplete="PF('dialogManageMedicalCentre').show()" />
                        </div>

                        <p:dataTable id="dataTableMedicalCentres" widgetVar="dataTableMedicalCentres" var="medicalCentre" value="#{medicalCentreManagementManagedBean.medicalCentres}" sortBy="#{medicalCentre.medicalCentreId}"
                                     styleClass="crud-management-table" rowKey="#{medicalCentre.medicalCentreId}" paginator="true" rows="10" paginatorPosition="bottom">

                            <f:facet name="header">
                                <div class="crud-table-header">
                                    <span style="font-weight: bold">MEDICAL CENTRES</span>

                                    <span class="filter-container ui-input-icon-left">
                                        <i class="pi pi-search"></i>
                                        <p:inputText id="globalFilter" onkeyup="PF('dataTableMedicalCentres').filter()" placeholder="Search" />
                                    </span>
                                </div>
                            </f:facet>

                            <p:column headerText="Medical Centre ID" width="12.5%" sortBy="#{medicalCentre.medicalCentreId}" filterBy="#{medicalCentre.medicalCentreId}" filterMatchMode="contains">
                                <h:outputText value="#{medicalCentre.medicalCentreId}" />
                            </p:column>

                            <p:column headerText="Name" width="25%" sortBy="#{medicalCentre.name}" filterBy="#{medicalCentre.name}" filterMatchMode="contains">
                                <h:outputText value="#{medicalCentre.name}" />
                            </p:column>

                            <p:column headerText="Phone" width="12.5%" sortBy="#{medicalCentre.phone}" filterBy="#{medicalCentre.phone}" filterMatchMode="contains">
                                <h:outputText value="#{medicalCentre.phone}" />
                            </p:column>

                            <p:column headerText="Address" width="40%" sortBy="#{medicalCentre.address}" filterBy="#{medicalCentre.address}" filterMatchMode="contains">
                                #{medicalCentre.foo()}
                                <h:outputText value="#{medicalCentre.delimitedAddress}" />
                            </p:column>

                            <p:column headerText="Action" width="10%">
                                <p:commandButton styleClass="edit-button rounded-button success-button" icon="pi pi-pencil" process="@this">

                                </p:commandButton>

                                <p:commandButton styleClass="warning-button rounded-button" icon="pi pi-trash" process="@this" oncomplete="PF('deleteMedicalCentreDialog').show()">
                                    <!--<f:setPropertyActionListener value="{medicalCentre}" target="{medicalCentreManagementManagedBean.selectedMedicalCentre}" />-->
                                </p:commandButton>
                            </p:column>

                        </p:dataTable>

                        <p:dialog id="dialogManageMedicalCentre" widgetVar="dialogManageMedicalCentre" header="Medical Centre Details" showEffect="fade" responsive="true" 
                                  draggable="false" modal="true" width="900" height="600">

                            <p:outputPanel id="panelManageMedicalCentre" class="ui-fluid">

                                <p:outputPanel rendered="#{not empty medicalCentreManagementManagedBean.selectedMedicalCentre}">         
                                    <h4>Basic Information</h4>
                                    <div class="p-formgrid p-grid">
                                        <div class="p-field p-col">
                                            <p:outputLabel for="name">Name</p:outputLabel>
                                            <p:inputText id="name" value="#{medicalCentreManagementManagedBean.selectedMedicalCentre.name}" style="width: 100%" 
                                                         required="true" requiredMessage="Medical centre name is required" />
                                            <p:message class="error-message" for="name" />
                                        </div>

                                        <div class="p-field p-col">
                                            <p:outputLabel for="phone">Telephone Number</p:outputLabel>
                                            <p:inputText id="phone" value="#{medicalCentreManagementManagedBean.selectedMedicalCentre.phone}" style="width: 100%" 
                                                         required="true" requiredMessage="Medical centre telephone number is required" />
                                            <p:message class="error-message" for="phone" />
                                        </div>
                                    </div>

                                    <h4>Centre Address</h4>
                                    <div class="p-formgrid p-grid">
                                        <div class="p-field p-col">
                                            <p:outputLabel for="street-name">Street Name</p:outputLabel>
                                            <p:inputText id="street-name" value="#{medicalCentreManagementManagedBean.selectedMedicalCentre.streetName}" style="width: 100%" 
                                                         required="true" requiredMessage="Medical centre street name is required" />
                                            <p:message class="error-message" for="street-name" />
                                        </div>

                                        <div class="p-field p-col">
                                            <p:outputLabel for="unit-number">Unit Number</p:outputLabel>
                                            <p:inputText id="unit-number" value="#{medicalCentreManagementManagedBean.selectedMedicalCentre.unitNumber}" style="width: 100%" />
                                            <p:message class="error-message" for="unit-number" />
                                        </div>

                                        <div class="p-field p-col">
                                            <p:outputLabel for="building-name">Building Name</p:outputLabel>
                                            <p:inputText id="building-name" value="#{medicalCentreManagementManagedBean.selectedMedicalCentre.buildingName}" style="width: 100%" />
                                            <p:message class="error-message" for="building-name" />
                                        </div>
                                    </div>

                                    <div class="p-formgrid p-grid">
                                        <div class="p-field p-col">
                                            <p:outputLabel for="country">Country</p:outputLabel>
                                            <p:selectOneMenu id="country" style="width: 100%" value="#{medicalCentreManagementManagedBean.selectedMedicalCentre.country}">
                                                <f:selectItem itemLabel="Singapore" itemValue="Singapore" />
                                            </p:selectOneMenu>
                                            <p:message class="error-message" for="country" />
                                        </div>

                                        <div class="p-field p-col">
                                            <p:outputLabel for="postal-code">Postal Code</p:outputLabel>
                                            <p:inputText id="postal-code" value="#{medicalCentreManagementManagedBean.selectedMedicalCentre.postal}" style="width: 100%" 
                                                         required="true" requiredMessage="Medical centre postal code is required" />
                                            <p:message class="error-message" for="postal-code" />
                                        </div>
                                    </div>

                                    <h4>Operating Hours</h4>
                                    <!-- Monday, Friday -->
                                    <div class="p-formgrid p-grid">
                                        <div class="p-field p-col">
                                            <h5>Monday</h5>
                                            <div class="p-formgrid p-grid">
                                                <div class="p-field p-col">
                                                    <p:outputLabel for="monday-opening">Opening Hours</p:outputLabel>
                                                    <p:datePicker id="monday-opening" value="#{medicalCentreManagementManagedBean.mondayOpening}" timeOnly="true" pattern="HH:mm" required="true" hourFormat="12" stepMinute="15" />
                                                </div>

                                                <div class="p-field p-col">
                                                    <p:outputLabel for="monday-closing">Closing Hours</p:outputLabel>
                                                    <p:datePicker id="monday-closing" value="#{medicalCentreManagementManagedBean.mondayClosing}" timeOnly="true" pattern="HH:mm" required="true" hourFormat="12" stepMinute="15" />
                                                </div>
                                            </div>
                                        </div>

                                        <div class="p-field p-col">
                                            <h5>Friday</h5>
                                            <div class="p-formgrid p-grid">
                                                <div class="p-field p-col">
                                                    <p:outputLabel for="friday-opening">Opening Hours</p:outputLabel>
                                                    <p:datePicker id="friday-opening" value="#{medicalCentreManagementManagedBean.fridayOpening}" timeOnly="true" pattern="HH:mm" required="true" hourFormat="12" stepMinute="15" />
                                                </div>

                                                <div class="p-field p-col">
                                                    <p:outputLabel for="friday-closing">Closing Hours</p:outputLabel>
                                                    <p:datePicker id="friday-closing" value="#{medicalCentreManagementManagedBean.fridayClosing}" timeOnly="true" pattern="HH:mm" required="true" hourFormat="12" stepMinute="15" />
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Tuesday, Saturday -->
                                    <div class="p-formgrid p-grid">
                                        <div class="p-field p-col">
                                            <h5>Tuesday</h5>
                                            <div class="p-formgrid p-grid">
                                                <div class="p-field p-col">
                                                    <p:outputLabel for="tuesday-opening">Opening Hours</p:outputLabel>
                                                    <p:datePicker id="tuesday-opening" value="#{medicalCentreManagementManagedBean.tuesdayOpening}" timeOnly="true" pattern="HH:mm" required="true" hourFormat="12" stepMinute="15" />
                                                </div>

                                                <div class="p-field p-col">
                                                    <p:outputLabel for="tuesday-closing">Closing Hours</p:outputLabel>
                                                    <p:datePicker id="tuesday-closing" value="#{medicalCentreManagementManagedBean.tuesdayClosing}" timeOnly="true" pattern="HH:mm" required="true" hourFormat="12" stepMinute="15" />
                                                </div>
                                            </div>
                                        </div>

                                        <div class="p-field p-col">
                                            <h5>Saturday</h5>
                                            <div class="p-formgrid p-grid">
                                                <div class="p-field p-col">
                                                    <p:outputLabel for="saturday-opening">Opening Hours</p:outputLabel>
                                                    <p:datePicker id="saturday-opening" value="#{medicalCentreManagementManagedBean.saturdayOpening}" timeOnly="true" pattern="HH:mm" required="true" hourFormat="12" stepMinute="15" />
                                                </div>

                                                <div class="p-field p-col">
                                                    <p:outputLabel for="saturday-closing">Closing Hours</p:outputLabel>
                                                    <p:datePicker id="saturday-closing" value="#{medicalCentreManagementManagedBean.saturdayClosing}" timeOnly="true" pattern="HH:mm" required="true" hourFormat="12" stepMinute="15" />
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Wednesday, Sunday -->
                                    <div class="p-formgrid p-grid">
                                        <div class="p-field p-col">
                                            <h5>Wednesday</h5>
                                            <div class="p-formgrid p-grid">
                                                <div class="p-field p-col">
                                                    <p:outputLabel for="wednesday-opening">Opening Hours</p:outputLabel>
                                                    <p:datePicker id="wednesday-opening" value="#{medicalCentreManagementManagedBean.wednesdayOpening}" timeOnly="true" pattern="HH:mm" required="true" hourFormat="12" stepMinute="15" />
                                                </div>

                                                <div class="p-field p-col">
                                                    <p:outputLabel for="wednesday-closing">Closing Hours</p:outputLabel>
                                                    <p:datePicker id="wednesday-closing" value="#{medicalCentreManagementManagedBean.wednesdayClosing}" timeOnly="true" pattern="HH:mm" required="true" hourFormat="12" stepMinute="15" />
                                                </div>
                                            </div>
                                        </div>

                                        <div class="p-field p-col">
                                            <h5>Sunday</h5>
                                            <div class="p-formgrid p-grid">
                                                <div class="p-field p-col">
                                                    <p:outputLabel for="sunday-opening">Opening Hours</p:outputLabel>
                                                    <p:datePicker id="sunday-opening" value="#{medicalCentreManagementManagedBean.sundayOpening}" timeOnly="true" pattern="HH:mm" required="true" hourFormat="12" stepMinute="15" />
                                                </div>

                                                <div class="p-field p-col">
                                                    <p:outputLabel for="sunday-closing">Closing Hours</p:outputLabel>
                                                    <p:datePicker id="sunday-closing" value="#{medicalCentreManagementManagedBean.sundayClosing}" timeOnly="true" pattern="HH:mm" required="true" hourFormat="12" stepMinute="15" />
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Thursday, Holiday -->
                                    <div class="p-formgrid p-grid">
                                        <div class="p-field p-col">
                                            <h5>Thursday</h5>
                                            <div class="p-formgrid p-grid">
                                                <div class="p-field p-col">
                                                    <p:outputLabel for="thursday-opening">Opening Hours</p:outputLabel>
                                                    <p:datePicker id="thursday-opening" value="#{medicalCentreManagementManagedBean.thursdayOpening}" timeOnly="true" pattern="HH:mm" required="true" hourFormat="12" stepMinute="15" />
                                                </div>

                                                <div class="p-field p-col">
                                                    <p:outputLabel for="thursday-closing">Closing Hours</p:outputLabel>
                                                    <p:datePicker id="thursday-closing" value="#{medicalCentreManagementManagedBean.thursdayClosing}" timeOnly="true" pattern="HH:mm" required="true" hourFormat="12" stepMinute="15" />
                                                </div>
                                            </div>
                                        </div>

                                        <div class="p-field p-col">
                                            <h5>Public Holiday</h5>
                                            <div class="p-formgrid p-grid">
                                                <div class="p-field p-col">
                                                    <p:outputLabel for="holiday-opening">Opening Hours</p:outputLabel>
                                                    <p:datePicker id="holiday-opening" value="#{medicalCentreManagementManagedBean.holidayOpening}" timeOnly="true" pattern="HH:mm" required="true" hourFormat="12" stepMinute="15" />
                                                </div>

                                                <div class="p-field p-col">
                                                    <p:outputLabel for="holiday-closing">Closing Hours</p:outputLabel>
                                                    <p:datePicker id="holiday-closing" value="#{medicalCentreManagementManagedBean.holidayClosing}" timeOnly="true" pattern="HH:mm" required="true" hourFormat="12" stepMinute="15" />
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </p:outputPanel>

                            </p:outputPanel>

                            <f:facet name="footer">
                                <p:commandButton value="Save" icon="pi pi-check" actionListener="#{medicalCentreManagementManagedBean.save}" 
                                                 update="dataTableMedicalCentres growl-message panelManageMedicalCentre" >
                                    <p:ajax rendered="@form"/>
                                </p:commandButton>
                                <p:commandButton value="Cancel" icon="pi pi-times" onclick="PF('dialogManageMedicalCentre').hide()" class="secondary-button" />
                            </f:facet>

                        </p:dialog>

                    </div>
                </div>
            </div>
        </h:form>

        <h:outputStylesheet name="medical-centre-management.css" library="css" />
    </ui:define>
</ui:composition>