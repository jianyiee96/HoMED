<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="template/template.xhtml">

    <ui:define name="title">Medical Board Session</ui:define>

    <ui:define name="content">
        <style type="text/css">

            .sign-true {
                background-color: #E0FAE0 !important
            }
            .sign-false {
                background-color: #FAE0E0 !important
            }
            .display-text {
                font-weight: bold;
            }
            .ui-autocomplete {
                width: 100%;
            }
            .ui-autocomplete-input {
                width: 100%;
            }
        </style>

        <ui:fragment rendered="#{medicalBoardSessionManagedBean.medicalBoardSlot.medicalBoardSlotStatusEnum != 'ALLOCATED'}">
            <h:form id="sessionForm">

                <div class="p-grid">
                    <div class="p-col-6">
                        <div class="card">
                            <h2>Medical Board Session</h2>
                            <p:panelGrid columns="2" layout="flex">
                                <h:panelGroup>
                                    <div>
                                        <span style="font-size: 1.25rem; font-weight: bold;">Medical Board Date Information</span>
                                    </div>

                                    <h:panelGrid columns="2" cellpadding="5">
                                        <p:outputLabel value="Date: "/>
                                        <p:outputLabel class="display-text" value="#{medicalBoardSessionManagedBean.renderDate(medicalBoardSessionManagedBean.medicalBoardSlot.startDateTime)}" />

                                        <p:outputLabel value="Scheduled Start Time: " />
                                        <p:outputLabel class="display-text" value="#{medicalBoardSessionManagedBean.renderTime(medicalBoardSessionManagedBean.medicalBoardSlot.startDateTime)}" />

                                        <p:outputLabel value="Scheduled End Time: " />
                                        <p:outputLabel class="display-text" value="#{medicalBoardSessionManagedBean.renderTime(medicalBoardSessionManagedBean.medicalBoardSlot.endDateTime)}" />

                                        <p:outputLabel value="Actual Start Time: " />
                                        <p:outputLabel class="display-text" value="#{medicalBoardSessionManagedBean.renderTime(medicalBoardSessionManagedBean.medicalBoardSlot.actualStartDateTime)}" />

                                        <p:outputLabel value="Actual End Time: " />
                                        <p:outputLabel class="display-text" value="#{medicalBoardSessionManagedBean.renderTime(medicalBoardSessionManagedBean.medicalBoardSlot.actualEndDateTime)}" />

                                    </h:panelGrid>
                                </h:panelGroup>
                                <h:panelGroup>
                                    <span style="font-size: 1.25rem; font-weight: bold;">Medical Board Members</span>
                                    <h:panelGrid columns="2" cellpadding="5">

                                        <h:outputText value="Chairman: " />
                                        <h:outputText class="display-text" value="#{medicalBoardSessionManagedBean.medicalBoardSlot.chairman.name}" />

                                        <h:outputText value="Medical Officer 1: " />
                                        <h:outputText class="display-text" value="#{medicalBoardSessionManagedBean.medicalBoardSlot.medicalOfficerOne.name}" />

                                        <h:outputText value="Medical Officer 2: "/>
                                        <h:outputText class="display-text" value="#{medicalBoardSessionManagedBean.medicalBoardSlot.medicalOfficerTwo.name}" />
                                    </h:panelGrid>
                                </h:panelGroup>
                            </p:panelGrid>
                            <p:separator />



                            <p:dataTable widgetVar="sessionDT" id="queueDT" var="case" value="#{medicalBoardSessionManagedBean.medicalBoardSlot.medicalBoardCases}"
                                         rowKey="#{case.medicalBoardCaseId}" selectionMode="single" selection="#{medicalBoardSessionManagedBean.selectedCase}"
                                         styleClass="ui-datatable-striped ui-datatable-sm ui-datatable-gridlines" rowStyleClass="#{medicalBoardSessionManagedBean.backgroundStyle(case)}"
                                         sortBy="#{case.medicalBoardCaseStatus}">
                                <p:ajax event="rowSelect" listener="#{medicalBoardSessionManagedBean.rowSelectListener()}" update="sessionForm" process="@this"/>
                                <f:facet id="dataViewListHeader" name="header">
                                    <div style="display: flex; align-items: center; justify-content: space-between; height:16px">
                                        <h:outputText value="Medical Board Cases"></h:outputText>

                                        <span>

                                            <p:commandButton actionListener="#{medicalBoardSessionManagedBean.back()}" value="Back" icon="pi pi-arrow-circle-left" >
                                            </p:commandButton>

                                            <p:commandButton rendered="#{medicalBoardSessionManagedBean.medicalBoardSlot.medicalBoardSlotStatusEnum == 'ONGOING'}" update="sessionForm" actionListener="#{medicalBoardSessionManagedBean.endSession()}" value="End Medical Board Session" class="danger-button p-ml-4 p-mr-4" icon="pi pi-check-square">
                                                <p:confirm header="Confirmation" message="Confirm End Medical Board Session? Any cases that are not signed will be put back into the waiting list." icon="pi pi-exclamation-triangle" />
                                            </p:commandButton>

                                            <p:commandButton rendered="#{medicalBoardSessionManagedBean.hasUnsignedCase()}" update="sessionForm" actionListener="#{medicalBoardSessionManagedBean.nextCase()}" value="Next Case" icon="fa fa-share-square-o" >
                                                <f:setPropertyActionListener target="#{medicalBoardSessionManagedBean.selectedCase}" value="#{medicalBoardSessionManagedBean.selectedCase}"/>
                                            </p:commandButton>

                                        </span>
                                    </div>
                                </f:facet>
                                <p:column headerText="Case ID" width="10%">
                                    <h:outputText value="#{case.medicalBoardCaseId}" />
                                </p:column>
                                <p:column headerText="Serviceman Name">
                                    <h:outputText value="#{case.consultation.booking.serviceman.name}" />
                                </p:column>
                                <p:column headerText="Board Type">
                                    <h:outputText value="#{case.medicalBoardType}" styleClass="form-status-badge"/>
                                </p:column>

                                <p:column headerText="PMB Review Date">
                                    <h:outputText value="#{case.consultation.endDateTime}">
                                        <f:convertDateTime pattern="dd-MM-yyyy HH:mm"/>
                                    </h:outputText>
                                </p:column>

                            </p:dataTable>

                        </div>
                    </div>

                    <ui:fragment rendered="#{medicalBoardSessionManagedBean.selectedCase != null}">



                        <div class="p-col-6">                        
                            <div class="timeline card card-w-title">
                                <h2>Medical Board Case [#{medicalBoardSessionManagedBean.selectedCase.medicalBoardCaseId}]</h2>
                                <ul>
                                    <li>
                                        <p:panelGrid columns="2" layout="flex">
                                            <h:panelGroup>
                                                <h5>Serviceman Information</h5>
                                                <h:panelGrid columns="2" cellpadding="5">
                                                    <p:outputLabel value="Name: " />
                                                    <p:outputLabel value="#{medicalBoardSessionManagedBean.selectedCase.consultation.booking.serviceman.name}" class="display-text"/>                                

                                                    <p:outputLabel value="Email " />
                                                    <p:outputLabel value="#{medicalBoardSessionManagedBean.selectedCase.consultation.booking.serviceman.email}" class="display-text"/>

                                                    <p:outputLabel value="Gender: " />
                                                    <p:outputLabel value="#{medicalBoardSessionManagedBean.selectedCase.consultation.booking.serviceman.gender}" class="display-text"/>

                                                    <p:outputLabel value="Role: " />
                                                    <p:outputLabel value="#{medicalBoardSessionManagedBean.selectedCase.consultation.booking.serviceman.role.stringVal}" class="display-text"/>

                                                    <p:outputLabel value="Blood type: " />
                                                    <p:outputLabel value="#{medicalBoardSessionManagedBean.selectedCase.consultation.booking.serviceman.bloodType.bloodTypeString}" class="display-text"/>

                                                    <p:outputLabel value="Pes status: " />
                                                    <p:outputLabel value="#{medicalBoardSessionManagedBean.selectedCase.consultation.booking.serviceman.pesStatus}" class="display-text"/>

                                                    <p:outputLabel value="ROD date: " />
                                                    <p:outputLabel value="#{medicalBoardSessionManagedBean.selectedCase.consultation.booking.serviceman.rod}" class="display-text">
                                                        <f:convertDateTime pattern="dd/MM/yyyy" />
                                                    </p:outputLabel>
                                                </h:panelGrid>
                                            </h:panelGroup>
                                            <h:panelGroup>
                                                <h5>Reviewing Doctor Information</h5>
                                                <h:panelGrid columns="2" cellpadding="5">
                                                    <p:outputLabel value="Name: " />
                                                    <p:outputLabel value="#{medicalBoardSessionManagedBean.selectedCase.consultation.medicalOfficer.name}" class="display-text" />                                

                                                    <p:outputLabel value="Email: " />
                                                    <p:outputLabel value="#{medicalBoardSessionManagedBean.selectedCase.consultation.medicalOfficer.email}" class="display-text" />                                

                                                    <p:outputLabel value="Phone Number: " />
                                                    <p:outputLabel value="#{medicalBoardSessionManagedBean.selectedCase.consultation.medicalOfficer.phoneNumber}" class="display-text" />
                                                </h:panelGrid>
                                            </h:panelGroup>
                                        </p:panelGrid>
                                    </li>

                                    <li>                                    
                                        <p:panelGrid columns="1" style="margin-right: 20px;" layout="flex">
                                            <h5>Statement of Case</h5>
                                            <h:panelGrid style="margin-top: -30px" frame="box" columns="1" width="100%">
                                                <p:outputLabel value="#{medicalBoardSessionManagedBean.selectedCase.statementOfCase}" escape="false" />
                                            </h:panelGrid>
                                        </p:panelGrid>
                                    </li>

                                    <li>
                                        <p:panelGrid columns="1" style="margin-right: 20px;" layout="flex">                                        
                                            <h5>Findings of the Board</h5>

                                            <h:panelGrid rendered="#{medicalBoardSessionManagedBean.selectedCase.isSigned}" frame="box" columns="1" style="margin-top: -30px" width="100%">
                                                <p:outputLabel value="#{medicalBoardSessionManagedBean.selectedCase.boardFindings}" escape="false" />
                                            </h:panelGrid>
                                            <p:textEditor rendered="#{not medicalBoardSessionManagedBean.selectedCase.isSigned}"
                                                          widgetVar="text-editor" value="#{medicalBoardSessionManagedBean.selectedCase.boardFindings}" 
                                                          height="200" style="margin-bottom:5px; margin-top: -30px">
                                                <f:facet name="toolbar">
                                                    <span class="ql-formats">
                                                        <button class="ql-bold"></button>
                                                        <button class="ql-italic"></button>
                                                        <button class="ql-underline"></button>
                                                        <button class="ql-strike"></button>
                                                    </span>
                                                    <span class="ql-formats">
                                                        <button class="ql-header" value="1"></button>
                                                        <button class="ql-header" value="2"></button>
                                                    </span>
                                                    <span class="ql-formats">
                                                        <button class="ql-list" value="ordered"></button>
                                                        <button class="ql-list" value="bullet"></button>
                                                        <button class="ql-indent" value="-1"></button>
                                                        <button class="ql-indent" value="+1"></button>
                                                    </span>
                                                    <span class="ql-formats">
                                                        <select class="ql-color"></select>
                                                        <select class="ql-background"></select>
                                                    </span>
                                                    <span class="ql-formats">
                                                        <button class="ql-clean"></button>
                                                    </span>
                                                </f:facet>
                                                <p:ajax event="keyup" process="@this"/>
                                            </p:textEditor>
                                        </p:panelGrid>



                                    </li>
                                    <li>
                                        <p:panelGrid columns="1" layout="flex">
                                            <h5>Medical Board Results</h5>

                                            <h:panelGroup>
                                                <h:panelGrid rendered="#{not medicalBoardSessionManagedBean.selectedCase.isSigned}" style="margin-top: -30px" columns="2" cellpadding="5">
                                                    <p:outputLabel value="Final Pes Status: " />
                                                    <p:selectOneMenu value="#{medicalBoardSessionManagedBean.selectedCase.finalPesStatus}" style="width:125px">
                                                        <f:selectItem value="#{null}" itemLabel="No Change" />
                                                        <f:selectItems value="#{medicalBoardSessionManagedBean.pesStatuses}" var="pesStatus" itemLabel="#{pesStatus}" />
                                                    </p:selectOneMenu>
                                                </h:panelGrid>
                                                <h:panelGrid rendered="#{medicalBoardSessionManagedBean.selectedCase.isSigned}" style="margin-top: -30px" columns="2" cellpadding="5">
                                                    <p:outputLabel rendered="#{medicalBoardSessionManagedBean.selectedCase.finalPesStatus != null}" value="Final Pes Status: #{medicalBoardSessionManagedBean.selectedCase.finalPesStatus}" />
                                                    <p:outputLabel rendered="#{medicalBoardSessionManagedBean.selectedCase.finalPesStatus == null}" value="No change in Pes Status" />
                                                </h:panelGrid>
                                                <h:panelGrid>

                                                    <p:dataTable rendered="#{medicalBoardSessionManagedBean.selectedCase.isSigned}" styleClass="ui-datatable-striped ui-datatable-sm ui-datatable-gridlines" var="status" value="#{medicalBoardSessionManagedBean.selectedCase.conditionStatuses}">

                                                        <p:column headerText="New/Updated Status">
                                                            <h:outputText rendered="#{status.description != null}" value="#{status.description}" />
                                                        </p:column>

                                                        <p:column style="width: 300px" headerText="Status End Date (Optional)">

                                                            <h:outputText rendered="#{status.statusEndDate != null}" value="#{status.statusEndDate}">
                                                                <f:convertDateTime pattern="dd-MM-yyyy" />
                                                            </h:outputText>
                                                            <h:outputText rendered="#{status.statusEndDate == null}"  value="Permanent Status"/>

                                                        </p:column>



                                                    </p:dataTable>



                                                    <p:dataTable rendered="#{not medicalBoardSessionManagedBean.selectedCase.isSigned and medicalBoardSessionManagedBean.servicemanCurrentConditionStatuses.size() != 0}" styleClass="ui-datatable-striped ui-datatable-sm ui-datatable-gridlines" var="status" value="#{medicalBoardSessionManagedBean.servicemanCurrentConditionStatuses}">

                                                        <p:column headerText="Current Status">
                                                            <h:outputText value="#{status.description}" />
                                                        </p:column>

                                                        <p:column style="width: 300px" headerText="Status End Date">

                                                            <h:outputText rendered="#{status.statusEndDate != null}" value="#{status.statusEndDate}">
                                                                <f:convertDateTime pattern="dd-MM-yyyy" />
                                                            </h:outputText>
                                                            <h:outputText rendered="#{status.statusEndDate == null}"  value="Permanent Status"/>

                                                        </p:column>

                                                    </p:dataTable>


                                                    <h:panelGrid rendered="#{not medicalBoardSessionManagedBean.selectedCase.isSigned and medicalBoardSessionManagedBean.servicemanCurrentConditionStatuses.size() != 0}">
                                                        <p:commandButton value="Copy Current Status" update="statusDT" actionListener="#{medicalBoardSessionManagedBean.copyCurrentConditionStatus()}"></p:commandButton>
                                                    </h:panelGrid>


                                                    <p:dataTable rendered="#{not medicalBoardSessionManagedBean.selectedCase.isSigned}" 
                                                                 id="statusDT" widgetVar="statusDT" styleClass="ui-datatable-striped ui-datatable-sm ui-datatable-gridlines" 
                                                                 var="status" value="#{medicalBoardSessionManagedBean.selectedCase.conditionStatuses}"  editable="true" rowIndexVar="rowIndex">

                                                        <p:column headerText="New/Updated Status">
                                                            <p:cellEditor>
                                                                <f:facet name="output">
                                                                    <h:outputText rendered="#{status.description != null}" value="#{status.description}" />
                                                                    <h:outputText rendered="#{status.description == null}" value="-" />
                                                                </f:facet>
                                                                <f:facet name="input">
                                                                    <p:autoComplete id="modelInput" value="#{status.description}" completeMethod="#{medicalBoardSessionManagedBean.autoComplete}"/>
                                                                </f:facet>
                                                            </p:cellEditor>
                                                        </p:column>

                                                        <p:column style="width: 200px" headerText="Status End Date (Optional)">
                                                            <p:cellEditor>
                                                                <f:facet name="output">
                                                                    <h:outputText rendered="#{status.statusEndDate != null and status.description != null}" value="#{status.statusEndDate}">
                                                                        <f:convertDateTime pattern="dd-MM-yyyy" />
                                                                    </h:outputText>
                                                                    <h:outputText rendered="#{status.description == null}"  value="-"/>
                                                                    <h:outputText rendered="#{status.statusEndDate == null and status.description != null }"  value="Permanent Status"/>
                                                                </f:facet>
                                                                <f:facet name="input">
                                                                    <p:datePicker value="#{status.statusEndDate}"  mindate="#{medicalBoardSessionManagedBean.selectedCase.medicalBoardSlot.actualStartDateTime}"  showIcon="true" />
                                                                </f:facet>
                                                            </p:cellEditor>
                                                        </p:column>

                                                        <p:column style="width: 80px">
                                                            <p:commandButton id="date-trigger" icon="pi pi-clock" class=" p-mx-2 warning-button rounded-button">
                                                            </p:commandButton>
                                                            <p:menu overlay="true" trigger="date-trigger" my="left top" at="left bottom">
                                                                <p:submenu label="Status Duration">
                                                                    <p:menuitem value="3 months" actionListener="#{medicalBoardSessionManagedBean.doChangeDate(status, 3)}"
                                                                                process="@this" update="@form:statusDT:@row(#{rowIndex})">
                                                                    </p:menuitem>
                                                                    <p:menuitem value="6 months" actionListener="#{medicalBoardSessionManagedBean.doChangeDate(status, 6)}"
                                                                                process="@this" update="@form:statusDT:@row(#{rowIndex})">
                                                                    </p:menuitem>
                                                                    <p:menuitem value="9 months" actionListener="#{medicalBoardSessionManagedBean.doChangeDate(status, 9)}"
                                                                                process="@this" update="@form:statusDT:@row(#{rowIndex})">
                                                                    </p:menuitem>
                                                                    <p:menuitem value="12 months" actionListener="#{medicalBoardSessionManagedBean.doChangeDate(status, 12)}"
                                                                                process="@this" update="@form:statusDT:@row(#{rowIndex})">
                                                                    </p:menuitem>
                                                                    <p:menuitem value="Permanent Status" actionListener="#{medicalBoardSessionManagedBean.doChangeDate(status, null)}"
                                                                                process="@this" update="@form:statusDT:@row(#{rowIndex})">
                                                                    </p:menuitem>
                                                                </p:submenu>
                                                            </p:menu>

                                                            <p:commandButton class="rounded-button danger-button" update="statusDT"  icon="pi pi-trash" title="Remove Status" actionListener="#{medicalBoardSessionManagedBean.removeConditionStatus}">
                                                                <f:attribute name="statusToDelete" value="#{status}" />
                                                            </p:commandButton>
                                                        </p:column>



                                                        <p:column style="width:59px">
                                                            <p:rowEditor />
                                                        </p:column>


                                                    </p:dataTable>
                                                    <h:panelGrid rendered="#{not medicalBoardSessionManagedBean.selectedCase.isSigned}" columns="2" width="100%">
                                                        <h:panelGrid rendered="#{not medicalBoardSessionManagedBean.selectedCase.isSigned}" columns="2">
                                                            <p:commandButton value="Add Status" update="statusDT" actionListener="#{medicalBoardSessionManagedBean.addConditionStatus()}"></p:commandButton>
                                                            <p:commandButton value="Clear All Empty Status" update="statusDT" actionListener="#{medicalBoardSessionManagedBean.clearEmptyConditionStatus()}"></p:commandButton>
                                                        </h:panelGrid>
                                                        <h:panelGrid rendered="#{not medicalBoardSessionManagedBean.selectedCase.isSigned}" style="float: right" columns="2">
                                                            <p:commandButton value="Pre Defined Condition Statuses" update="statusDT"
                                                                             oncomplete="PF('dialogManagePreDefinedStatus').show()" actionListener="#{medicalBoardSessionManagedBean.manageStatus()}"></p:commandButton>
                                                        </h:panelGrid>
                                                        <h:panelGrid rendered="#{not medicalBoardSessionManagedBean.selectedCase.isSigned}" columns="1">

                                                            <p:commandButton actionListener="#{medicalBoardSessionManagedBean.toggleFollowUpAction()}" update="sessionForm" rendered="#{not medicalBoardSessionManagedBean.hasFollowUp}" value="Create Follow Up Medical Board" styleClass="" class="outlined-button secondary-button" icon="pi pi-plus" />
                                                            <p:commandButton actionListener="#{medicalBoardSessionManagedBean.toggleFollowUpAction()}" update="sessionForm" rendered="#{medicalBoardSessionManagedBean.hasFollowUp }" value="Cancel Create Follow Up Medical Board" class="secondary-button" icon="pi pi-times" />
                                                        </h:panelGrid>

                                                    </h:panelGrid>

                                                </h:panelGrid>


                                            </h:panelGroup>


                                        </p:panelGrid>

                                    </li>

                                    <ui:fragment rendered="#{not medicalBoardSessionManagedBean.selectedCase.isSigned and medicalBoardSessionManagedBean.hasFollowUp}">
                                        <li>

                                            <p:panelGrid columns="1" layout="flex">
                                                <h5>Follow Up Medical Board</h5>


                                                <h:panelGrid style="margin-top: -30px" columns="1" cellpadding="5" width="100%">
                                                    <p:selectOneButton unselectable="false" class="board-button-set" value="#{medicalBoardSessionManagedBean.currentFollowUpAction}">
                                                        <f:selectItem itemLabel="Medical Board in Presence" itemValue="MBIP" />
                                                        <f:selectItem itemLabel="Medical Board in Absence" itemValue="MBIA" />
                                                    </p:selectOneButton>

                                                    <p:outputLabel value="Statement of Case (follow up): " />
                                                    <p:textEditor widgetVar="text-editor" value="#{medicalBoardSessionManagedBean.followUpStatement}" 
                                                                  height="200" style="margin-bottom:5px">
                                                        <f:facet name="toolbar">
                                                            <span class="ql-formats">
                                                                <button class="ql-bold"></button>
                                                                <button class="ql-italic"></button>
                                                                <button class="ql-underline"></button>
                                                                <button class="ql-strike"></button>
                                                            </span>
                                                            <span class="ql-formats">
                                                                <button class="ql-header" value="1"></button>
                                                                <button class="ql-header" value="2"></button>
                                                            </span>
                                                            <span class="ql-formats">
                                                                <button class="ql-list" value="ordered"></button>
                                                                <button class="ql-list" value="bullet"></button>
                                                                <button class="ql-indent" value="-1"></button>
                                                                <button class="ql-indent" value="+1"></button>
                                                            </span>
                                                            <span class="ql-formats">
                                                                <select class="ql-color"></select>
                                                                <select class="ql-background"></select>
                                                            </span>
                                                            <span class="ql-formats">
                                                                <button class="ql-clean"></button>
                                                            </span>
                                                        </f:facet>
                                                        <p:ajax event="keyup" process="@this"/>
                                                    </p:textEditor>
                                                </h:panelGrid>


                                            </p:panelGrid>


                                        </li>
                                    </ui:fragment>


                                    <li>

                                        <ui:fragment rendered="#{not medicalBoardSessionManagedBean.selectedCase.isSigned}">


                                            <div style="display: flex; justify-content: center">
                                                <p:commandButton update="sessionForm" actionListener="#{medicalBoardSessionManagedBean.signSelectedCase()}" value="Sign Case" class="success-button p-ml-2" icon="pi pi-check-square">
                                                    <p:confirm header="Sign Confirmation" message="Confirm Sign Case? Board Findings and Medical Board Results will be recorded in the system." icon="pi pi-exclamation-triangle" />
                                                </p:commandButton>
                                            </div>

                                        </ui:fragment>

                                        <ui:fragment rendered="#{medicalBoardSessionManagedBean.selectedCase.isSigned}">
                                            <h5>This Case Is Signed and is on view only mode.</h5>


                                            <h:outputText rendered="#{medicalBoardSessionManagedBean.selectedCase.followUpMedicalBoardCase != null}" value="A Medical Board In #{medicalBoardSessionManagedBean.selectedCase.followUpMedicalBoardCase.medicalBoardType} Case has been created from this case." style="font-weight: bold" />


                                        </ui:fragment>

                                    </li>


                                </ul>



                            </div>
                        </div>
                    </ui:fragment>

                </div>

                <p:confirmDialog global="true" width="500" >
                    <p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes" icon="pi pi-check" />
                    <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="pi pi-times" />
                </p:confirmDialog>
                <p:growl id="growl-message" for="growl-message" showDetail="true">
                    <p:autoUpdate/>
                </p:growl>



                <p:dialog id="dialogManagePreDefinedStatus" widgetVar="dialogManagePreDefinedStatus" header="Pre Defined Condition Status" showEffect="fade"
                          draggable="false" modal="true" responsive="true" fitViewport="true" onShow="PF('dialogManagePreDefinedStatus').initPosition()"
                          minWidth="500" width="500">



                    <p:dataTable id="pdsDT" styleClass="ui-datatable-striped ui-datatable-sm ui-datatable-gridlines" var="preDefStatus" value="#{medicalBoardSessionManagedBean.preDefinedConditionStatuses}">

                        <p:column headerText="Status">
                            <h:outputText value="#{preDefStatus.description}" />
                        </p:column>

                        <p:column style="width: 30px">

                            <p:commandButton class="rounded-button danger-button" icon="pi pi-trash" title="Remove Status" update="pdsDT" actionListener="#{medicalBoardSessionManagedBean.removePreDefinedConditionStatus}">
                                <f:attribute name="statusToDelete" value="#{preDefStatus}" />
                            </p:commandButton>
                        </p:column>

                    </p:dataTable>

                    <div class="p-field" style="margin-top: 1rem;">

                        <p:inputText style="width: 90%; margin-right: 8px;" id="newPDS" value="#{medicalBoardSessionManagedBean.newPreDefinedConditionStatus}" placeholder="New Pre Defined Condition Status" >
                            <p:ajax event="keyup" update="create"/>
                        </p:inputText>
                        <p:commandButton id="create" style="width: 30px;" icon="pi pi-plus" update="pdsDT newPDS" action="#{medicalBoardSessionManagedBean.addPreDefinedConditionStatus()}" disabled="#{medicalBoardSessionManagedBean.newPreDefinedConditionStatus == null || medicalBoardSessionManagedBean.newPreDefinedConditionStatus == ''}" >
                        </p:commandButton>

                    </div>

                </p:dialog>




            </h:form>
        </ui:fragment>

    </ui:define>

</ui:composition>